<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Navona â€” Admin Panel</title>
  <link rel="stylesheet" href="/styles/admin.css">
</head>
<body>
  <!-- NAVBAR -->
  <header class="navbar">
    <div class="logo">Navona â€” Admin</div>
    <a href="/" class="btn secondary">Logout</a>
  </header>

  <!-- MAIN -->
  <main class="admin-main">
    <h1>ğŸ‘©â€ğŸ’¼ User Management</h1>
    <p class="sub">Manage registered users, adjust credits, verify accounts, or remove users.</p>

    <div class="table-wrap">
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Provider</th>
            <th>Credits</th>
            <th>Verified</th>
            <th>Last Seen</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for u in users %}
          <tr>
            <td>{{ u.id }}</td>
            <td>{{ u.name }}</td>
            <td>{{ u.email }}</td>
            <td>{{ u.provider }}</td>
            <td>{{ u.credits }}</td>
            <td>{{ 'Yes' if u.is_verified else 'No' }}</td>
            <td>{{ u.last_seen or '-' }}</td>
            <td>
              <form action="/admin/user/{{ u.id }}/credits" method="post" style="display:inline;">
  <input name="delta" value="+1" type="hidden">
  <button class="btn small" type="submit">+1</button>
</form>

<form action="/admin/user/{{ u.id }}/credits" method="post" style="display:inline;">
  <input name="delta" value="-1" type="hidden">
  <button class="btn small" type="submit">-1</button>
</form>


              <!-- Toggle Verify -->
              <form action="/admin/user/{{ u.id }}/toggle-verified" method="post" style="display:inline;">
                <button class="btn small" type="submit">Toggle Verify</button>
              </form>

              <!-- Delete -->
              <form action="/admin/user/{{ u.id }}/delete" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this user?');">
                <button class="btn small danger" type="submit">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </main>

  <footer class="footer">
    <p>Â© 2025 Navona. Admin Console.</p>
  </footer>
</body>
</html>
